id: short_courses_option_groups
label: Short Courses Option Groups CSV
migration_group: short_courses
dependencies:
  enforced:
    module:
      - custom_migrate
migration_dependencies:
  required:
    - short_courses_option_groups_options
source:
  plugin: csv
  path: modules/custom/custom_migrate/imports/short_courses_option_groups.csv
  header_row_count: 1
  keys:
    - option_group_id
  column_names:
    0:
      option_group_id: Option id
    1:
      title: Title
    2:
      option_ids: Options

process:
  field_vih_og_title: title
  field_vih_og_options:
    -
      plugin: migration_lookup
      migration: short_courses_option_groups_options
      source: option_ids
      no_stub: true
    -
      plugin: iterator
      process:
        target_id: '0'
        target_revision_id: '1'
destination:
  plugin: 'entity_reference_revisions:paragraph'
  default_bundle: vih_option_group
